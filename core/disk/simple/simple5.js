!function(e,t){"use strict";var n,r=e.Simple=e.Simple||{},o=0,i={},a={},u={INIT:"initialize",SUCCESS:"success"},s=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),l=!s&&"undefined"!=typeof importScripts,c=!("undefined"==typeof module||!module.exports),p=0;if(s){var f=navigator.userAgent;f.indexOf("MSIE")>=0&&(p=parseInt(/msie\s+(\d+)/gi.exec(navigator.userAgent)[1]))}var d=!1;c&&"win32"===process.platform&&(d=!0);var m=function(e,t){var n=this;"string"==typeof e&&(e={name:e}),n.name=e.name,n.checkName(),n.config=e,n.callback=t,n.root=e.root,n.requires=[],n.module={id:e.name,filename:m.source(e.name),exports:{},parent:null,loaded:!1},n.loaded=!1,n.require=e.require||null,n.requireCount=e.require?e.require.length:0,n.exports={},n.checkDefine()||n.init()};m.prototype={init:function(){var e=this;o++,i[e.name]=e,(1===o||e.root)&&(n=e),c?e.requireHandle():setTimeout(function(){e.requireHandle.call(e),e=null},m.DELAY_TIME)},requireHandle:function(){var e,t=this;if(t.require&&t.require.length>0)for(var n=t.require,r=0,o=n.length;o>r;r++)e=m.path(t.name,n[r]),-1===t.requires.indexOf(e)&&t.requires.push(e),t.loadModuleHandle(e);else t.requireSuccess()},loadModuleHandle:function(e){var t=this,n=setTimeout(function(){new Error("timeout 模块加载超时 "+m.TIMEOUT_DEFAULT/1e3+"秒 "+e+"\n"+m.source(e))},m.TIMEOUT_DEFAULT),r=function(){clearTimeout(n),--t.requireCount||t.requireSuccess(),t=null};t.checkDefine(e)?r():m.loader(e,r)},requireSuccess:function(){--o||n.success()},success:function(e){var t=this;return t.loaded||(t.loaded=!0,e&&(t.module.parent=e),t.callbackHandle(),t.exports=t.module.exports,t.module.loaded=!0),t},callbackHandle:function(){var e=this;e.callback&&e.callback(function(){return m.require.apply(e,arguments)},e.module,e.module.exports,r)},getExports:function(){return this.exports},checkName:function(){if("string"!=typeof this.name||!this.name)throw new TypeError("module 模块必须有名字")},checkDefine:function(e){return i[e||this.name]!==t},constructor:m},m.source=function(e,t,n){return d&&0===e.search(/^\w:\\/gi)?e.replace(/\//gi,"\\"):e?0===e.indexOf("http")||-1===e.indexOf(":")?e:r.config?(e=e.split(":"),(n||r.config.packages)[e[0]]+(e[1]||"")+(null===t?"":t||".js")):null:void 0},m.normalize=function(e){var t=/^(http:\/\/|https:\/\/|[\/]{2}[^\/]+[\/]+[^\/]+)?([\/])?([\s\S]*?)$/,n=function(e){var n=t.exec(e),r=n[1]||"";return{device:r,isAbsolute:!!n[2],tail:n[3]}},r=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];o&&"."!==o&&(".."===o?n.length&&".."!==n[n.length-1]?n.pop():t&&n.push(".."):n.push(o))}return n},o=function(e){var t=n(e),o=t.device,i=t.isAbsolute,a=t.tail,u=/[\/]$/.test(a);return a=r(a.split(/[/:]+/),!i).join("/"),a||i||(a="."),a&&u&&(a+="/"),o+(i?"/":"")+a};return o(e)},m.path=function(e,t){return 0===t.indexOf(".")&&(t=m.normalize(e.replace(/(\/|:)[\w-]*$/gi,"/")+t).replace(/\.\//gi,"/").replace(/(^[^\/]+)\//gi,"$1:")),t},m.browser=function(e,t){var n=m.source(e),r=a[n];if(r)r.state===u.SUCCESS?t():r.callback.push(t);else{var o=document.createElement("script");o.src=n,a[n]={state:u.INIT,callback:[t]};var i=function(){o=null;for(var e=a[n].callback,t=0,r=e.length;r>t;t++)e[t](n);a[n].callback=[],a[n].state=u.SUCCESS};"onload"in o?(o.onload=i,o.onerror=function(){throw new TypeError("file 文件加载失败 "+n)}):o.attachEvent("onreadystatechange",function(){"loaded"!==o.readyState&&"complete"!==o.readyState||i()}),document.head.appendChild(o)}},m.webWorker=function(e,t){self.importScripts(m.source(e)),t()},m.nodeJS=function(e,t){r.require(e),t()},m.require=function(e){if(-1===e.indexOf(":")&&0===e.search(/\w/gi))return c?require(e):null;var t=this,n=t.name;e=m.path(n,e);var r=i[e];if(r)return r.success(t.module).getExports();if(c)return require(m.source(e));throw new TypeError("require 找不到模块 "+e+"\n filename: "+t.module.filename+"\n name: "+n)},m.loader=function(e,t){var n=".js",r=e.replace(/^.*\//gi,"");r.indexOf(".")>-1&&(n=/\.\w+$/gi.exec(r),n&&(n=n[0])),s?m.loader.define.browser[n](e,t):l?m.loader.define.webWorker[n](e,t):c&&m.loader.define.node[n](e,t)},m.depend=function(e){var t,n=[],r=i[e];if(r){var o=r.requires;if(o.length)for(var a=0,u=o.length;u>a;a++)t=o[a],t!==e&&(n.push(t),n=n.concat(m.depend(t)))}return n},m.loader.define={browser:{".js":m.browser},webWorker:{".js":m.webWorker},node:{".js":m.nodeJS}},m.TIMEOUT_DEFAULT=6e3,m.DELAY_TIME=0,r.Module=function(e,t){return new m(e,t)},r.Module.setTimeout=function(e){m.TIMEOUT_DEFAULT=e},r.Module.loader=function(e,t,n){m.loader.define[n][e]=t},r.Module.cache=i,r.Module.path=m.path,r.Module.path.normalize=m.normalize,r.Module.path.source=m.source,r.Module.depend=m.depend,r.platform={browser:s,webWorker:l,node:c,ie:p}}("undefined"!=typeof global?global:window),!function(){"use strict";void 0===Simple.develop&&(Simple.develop=!0),Simple.config.timeout&&Simple.Module.setTimeout(Simple.config.timeout),Simple.Module.config={comID:"data-sp",listKey:"key",idPrefix:"s"};var e=["./core/object/main","./core/message/main","./core/deferred/main","./core/callbacks/main","./core/view/main","./core/template/main","./core/utils/main","./application/main","./component/main","./router/main","./store/main","./tools/ajax/main","./tools/cookie/main","./tools/storage/main"];Simple.config.name&&e.push(Simple.config.name+":router/main"),Simple.Module({name:"simple",require:e,root:!0},function(e,t,n,r){r.Utils=e("./core/utils/main"),r.Object=e("./core/object/main"),r.View=e("./core/view/main"),r.Message=e("./core/message/main"),r.Callbacks=e("./core/callbacks/main"),r.Deferred=e("./core/deferred/main"),r.Tools={ajax:e("./tools/ajax/main"),cookie:e("./tools/cookie/main"),storage:e("./tools/storage/main")},r.Component=e("./component/main"),r.Router=e("./router/main").route,r.Store=e("./store/main"),r.Application=e("./application/main"),r.Template=e("./core/template/main"),r.config.name&&e(r.config.name+":router/main"),r.ready&&"function"==typeof r.ready&&r.ready(),r.platform.browser&&r.Router.go(location.href)})}(),Simple.Module("simple:core/object/main",function(e,t,n,r){"use strict";var o=e("../class/main"),i=e("../event/main");t.exports=o().extend({on:i.on,off:i.off,once:i.once,emit:i.trigger}),t.exports.setName(t.id)}),Simple.Module("simple:core/class/main",function(e,t,n,r){"use strict";var o=!(r.platform.ie&&r.platform.ie<=8),i=function(e,t){return e?e.$constructor&&!t?e.$constructor:i(e.__proto__,--t):void 0},a=function(){var e={},t=function(){var t=this;for(var n in e)t[n]=e[n];e=null,t.$super=function(){var e=i(o?t.__proto__:t,++t.$super.count);e&&e.call(t)},t.$super.count=0,t.$constructor&&t.$constructor.apply(t,arguments)};return t.create=function(t){return e=t,new this},t.extend=function(e){var t=a();t.prototype=Object.create(this.prototype),o||(t.prototype.__proto__=this.prototype);for(var n in e)"$constructor"===n?t.prototype.$constructor=e.$constructor:e.hasOwnProperty(n)&&(t.prototype[n]=e[n]);return e&&e.toString&&e.hasOwnProperty("toString")&&(t.prototype.toString=e.toString),t.prototype.constructor=t,t.toString=function(){return"Simple.Class<"+t.id+">"},t},t.setName=function(e){return t.id=e.replace(/[:/]/gi,".").replace(/\w+/gi,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}).replace(/-\w/gi,function(e){return e.substring(1,2).toUpperCase()}).replace(/\.Main$/gi,""),this},t.reopenClass=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"Simple.Class"},t};t.exports=a}),Simple.Module("simple:core/event/main",function(e,t,n,r){"use strict";function o(){}function i(e,t,n){var r=n[0];if(null==r||"object"!=typeof r)return!1;var o;if(n.length>2){var i=m.call(n,1);for(o in r)e.apply(t,h(o,r[o],i))}else for(o in r)e.call(t,o,r[o],n[1]);return!0}function a(e,t,n){return Object.defineProperty(e,t,{value:n,configurable:1,writable:1}),n}function u(e,t,n){return a(e,t,Object.create(n||null))}function s(e,t,n,r){var o=e[t];null!=o&&(o=o.filter(function(e){return null==n||l(e,n)?void 0!==r&&!c(e,r):!0}),0==o.length?(delete e[t],t in e&&(e[t]=null)):e[t]=o)}function l(e,t){return e[0]===t||e[0].__func===t}function c(e,t){return(e[0].__this||e[1])===t}function p(e,t,n){for(var r=0,o=e.length;o>r;++r){var i=e[r],a=i.length>2?i.slice(2):null;if(null==a?a=n:n.length>0&&a.push.apply(a,n),i[0].apply(void 0===i[1]?t:i[1],a)===!1&&a){var u=a[0];u&&u.stopPropagation&&(u.stopPropagation(),u.preventDefault())}}}var f="_Concert",d=Object.hasOwnProperty,m=Array.prototype.slice,h=Array.prototype.concat.bind(Array.prototype),v="Event name should be a string",g="Event listener should be a function";o.prototype.on=function y(e,t,n){if(null==e)throw new TypeError(v);if(i(y,this,arguments))return this;if(null==t)throw new TypeError(g);var r=this[f];null!=r&&d.call(this,f)||(r=u(this,f,r));var o=r[e];return null==o?o=r[e]=[]:d.call(r,e)||(o=r[e]=o.slice()),o.push(m.call(arguments,1)),this},o.prototype.once=function x(e,t,n){function r(){o.prototype.off.call(this,e,t),t.apply(void 0===n?this:n,arguments)}if(null==e)throw new TypeError(v);if(i(x,this,arguments))return this;if(null==t)throw new TypeError(g);r.__func=t,r.__this=n;var a=[e,r,void 0];return arguments.length>3&&a.push.apply(a,m.call(arguments,3)),o.prototype.on.apply(this,a)},o.prototype.off=function b(e,t,n){var r=this[f];if(null==r)return this;if(i(b,this,arguments))return this;if(null==t&&void 0===n)null==e?a(this,f,null):null!=r[e]&&(d.call(this,f)?delete r[e]:r=u(this,f,r),e in r&&(r[e]=null));else if(d.call(this,f)||(r=u(this,f,r)),null!=e)s(r,e,t,n);else for(e in r)s(r,e,t,n);return this},o.prototype.trigger=function(e){var t=this[f];return null==t?this:(null!=t[e]&&p(t[e],this,m.call(arguments,1)),null!=t.all&&p(t.all,this,arguments),this)},o.on=o.prototype.on,o.once=o.prototype.once,o.off=o.prototype.off,o.trigger=o.prototype.trigger,t.exports=o}),Simple.Module("simple:core/message/main",function(e,t,n,r){"use strict";var o=e("../event/main");t.exports=r.Object.create({on:o.on,off:o.off,once:o.once,emit:o.trigger})}),Simple.Module("simple:core/deferred/main",function(e,t,n,r){"use strict";t.exports=e("./core")}),Simple.Module("simple:core/deferred/core",function(e,t,n,r){"use strict";var o=r.Utils,i=r.Callbacks,a=function(e){return e},u=function(e){throw e},s=function(e){var t=[["notify","progress",i("memory"),i("memory"),2],["resolve","done",i("once memory"),i("once memory"),0,"resolved"],["reject","fail",i("once memory"),i("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return l.done(arguments).fail(arguments),this},"catch":function(e){return r.then(null,e)},pipe:function(){var e=arguments;return s(function(n){o.each(t,function(t){var i=o.isFunction(e[t[4]])&&e[t[4]];l[t[1]](function(){var e=i&&i.apply(this,arguments);e&&o.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this===r?n.promise():this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,n,i){function l(e,t,n,i){return function(){var s=this===r?void 0:this,p=arguments,f=function(){var r,f;if(!(c>e)){if(r=n.apply(s,p),r===t.promise())throw new TypeError("Thenable self-resolution");f=r&&("object"==typeof r||"function"==typeof r)&&r.then,o.isFunction(f)?i?f.call(r,l(c,t,a,i),l(c,t,u,i)):(c++,f.call(r,l(c,t,a,i),l(c,t,u,i),l(c,t,a,t.notify))):(n!==a&&(s=void 0,p=[r]),(i||t.resolveWith)(s||t.promise(),p))}},d=i?f:function(){try{f()}catch(r){e+1>=c&&(n!==u&&(s=void 0,p=[r]),t.rejectWith(s||t.promise(),p))}};e?d():setTimeout(d)}}var c=0;return s(function(r){t[0][3].add(l(0,r,o.isFunction(i)?i:a,r.notifyWith)),t[1][3].add(l(0,r,o.isFunction(e)?e:a)),t[2][3].add(l(0,r,o.isFunction(n)?n:u))}).promise()},promise:function(e){return null!=e?o.extend(e,r):r}},l={};return o.each(t,function(e,o){var i=e[2],a=e[5];r[e[1]]=i.add,a&&i.add(function(){n=a},t[3-o][2].disable,t[0][2].lock),i.add(e[3].fire),l[e[0]]=function(){return l[e[0]+"With"](this===l?r:this,arguments),this},l[e[0]+"With"]=i.fireWith}),r.promise(l),e&&e.call(l,l),l},l=function(e){var t,n,r,i,a=0,u=[].slice.call(arguments),l=u.length,c=1!==l||e&&o.isFunction(e.promise)?l:0,p=1===c?e:s(),f=function(e,t,r){return function(o){t[e]=this,r[e]=arguments.length>1?[].slice.call(arguments):o,r===n?p.notifyWith(t,r):--c||p.resolveWith(t,r)}};if(l>1)for(n=new Array(l),r=new Array(l),i=new Array(l);l>a;a++)u[a]&&o.isFunction(t=u[a].promise)?t.call(u[a]).progress(f(a,r,n)).done(f(a,i,u)).fail(p.reject):u[a]&&o.isFunction(t=u[a].then)?t.call(u[a],f(a,i,u),p.reject,f(a,r,n)):--c;return c||p.resolveWith(i,u),p.promise()};t.exports=s,t.exports.when=l}),Simple.Module("simple:core/callbacks/main",function(e,t,n,r){"use strict";t.exports=e("./core")}),Simple.Module("simple:core/callbacks/core",function(e,t,n,r){"use strict";var o=r.Utils,i=/\S+/g,a=function(e){var t={};return o.each(e.match(i)||[],function(e){t[e]=!0}),t},u=function(e){e="string"==typeof e?a(e):o.extend({},e);var t,n,r,i,u=[],s=[],l=-1,c=function(){for(i=e.once,r=t=!0;s.length;l=-1)for(n=s.shift();++l<u.length;)u[l].apply(n[0],n[1])===!1&&e.stopOnFalse&&(l=u.length,n=!1);e.memory||(n=!1),t=!1,i&&(u=n?[]:"")},p={add:function(){return u&&(n&&!t&&(l=u.length-1,s.push(n)),function r(t){o.each(t,function(t){o.isFunction(t)?e.unique&&p.has(t)||u.push(t):t&&t.length&&!o.isString(t)&&r(t)})}(arguments),n&&!t&&c()),this},remove:function(){return o.each(arguments,function(e){for(var t;(t=o.inArray(e,u,t))>-1;)u.splice(t,1),l>=t&&l--}),this},has:function(e){return e?o.inArray(e,u)>-1:u.length>0},empty:function(){return u&&(u=[]),this},disable:function(){return i=s=[],u=n="",this},disabled:function(){return!u},lock:function(){return i=s=[],n||t||(u=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||c()),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!r}};return p};t.exports=u}),Simple.Module("simple:core/view/main",function(e,t,n,r){"use strict";var o={},i=r.Utils,a=e("./core"),u=function(e,t){var n=[];return r.platform.browser?i.each(t,function(t){var i=r.Module.path(e,t);if(!o[i]){n.push(i);var a=document.createElement("link");a.href=r.Module.path.source(i,".css"),a.rel="stylesheet",a.type="text/css",document.head.appendChild(a),o[i]=!0}}):i.each(t,function(t){var i=r.Module.path(e,t);o[i]||(n.push(i),o[i]=!0)}),n};t.exports=r.Object.extend({$constructor:function(){var e=this;e.style=u(e.id,e.style),"string"==typeof e.template?e.template=function(e){return function(){return e}}(e.template):e.template=e.template.bind(a)},render:function(e,t,n,r){return this.template(e,t,n,r).toString()}}),t.exports.reopenClass({helpers:a.$helpers}),t.exports.setName(t.id)}),Simple.Module("simple:core/view/core",function(e,t,n,r){"use strict";var o=r.Utils,i=r.Module.config.comID,a={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},u=function(e){return a[e]},s=function(e){return l(e).replace(/&(?![\w#]+;)|[<>"']/g,u)},l=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?l(e.call(e)):""),e},c=function(e,t){e=[].slice.apply(e);var n=e[0],o=e.slice(1),a=o.shift(),u=o.pop(),s=t.instantiateComponent[u];s||(s=t);var l=t.instantiateComponent[n];if(l)return l._set({props:a,content:o,parent:s,name:n}),r.platform.node?l.render():"<div "+i+'="'+l.id+'">'+o.join("")+"</div>";throw new TypeError("component render error \nname: "+n)},p={utils:r.Utils,console:console};t.exports={$helpers:p,$string:l,$escape:s,$component:c,$each:o.each}}),Simple.Module("simple:core/template/main",function(e,t,n,r){"use strict";var o=r.Module.config.comID,i=r.Component.component,a=r.Utils,u=e("./virtual-template/main"),s=function(e){for(var t,n=[],r=e.children,i=0,a=r.length;a>i;i++)t=r[i],t.getAttribute(o)?n.push(t):n=n.concat(s(t));return n},l=function(e,t){var n=r.Component.STATUS;a.each(s(e),function(e){var r=e.getAttribute(o),a=i[r];a&&a.status===n.INITIALIZE&&t(a,e)})},c=function(e,t){var n=i[e.getAttribute(o)],a=r.Component.STATUS;n&&n.status===a.INITIALIZE?t(n,e):l(e,t)},p=function(e){for(var t,n=0,r=e.length;r>n;n++)(t=i[e[n]])&&t.unmount()},f=function(e){c(e.virtualDOM.DOM,function(e,t){e.render(t)})};t.exports=r.Object.extend({render:function(){var e=this;return r.platform.node?e.toString().replace(/^(<[^>]+)>/gi,"$1 "+o+'="'+e.id+'">'):(e.virtualDOM=u.create({id:e.id,target:e.target,view:e.toString.bind(e)}),e.virtualDOM.render(),f(e),e)},toString:function(e){var t=this;return t.view.render(e||t.data,t.id,t.controller,t.app)},forceUpdate:function(e,t,n){var o=this;return a.extend(o.data,e),r.platform.browser&&o.virtualDOM.setData(o.data,t,function(e,t){a.keys(e).length>0&&(p(t.remove),f(o)),n&&n()}),o},setProps:function(e,t,n){var o=this;return o.data.props=e,r.platform.browser&&o.virtualDOM.setData(o.data,t,function(e,t){a.keys(e).length>0&&(p(t.remove),f(o),n&&n())}),o},setState:function(e,t,n){var o=this;return o.data.state=e,r.platform.browser&&o.virtualDOM.setData(o.data,t,function(e,t){a.keys(e).length>0&&(p(t.remove),f(o),n&&n())}),o},setHTML:function(e,t,n){var o=this;return r.platform.browser&&o.virtualDOM.setHTML(e,t,function(e,t){a.keys(e).length>0&&(p(t.remove),f(o),n&&n())}),o}}),t.exports.setName(t.id)}),Simple.Module("simple:core/template/virtual-template/main",function(e,t,n,r){"use strict";var o=r.Module.config.comID,i=r.Module.config.idPrefix,a=e("../virtual-dom/main"),u=e("./utils"),s=e("./dom"),l=a.diff,c=a.patch,p=function(e,t,n){if(t.getAttribute(e)===n)return t;for(var r=t.children,o=0,i=r.length;i>o;o++)if(r[o].getAttribute(e)===n)return r[o];return null},f=function(e,t){var n=e.tagName.toLowerCase();return"simple-component"===n?null:p(o,e,t)},d=function(e,t){t&&!e.getAttribute(o)&&e.setAttribute(o,t)},m=function(e,t){return s(e.view(t))};t.exports=r.Object.extend({render:function(){var e=this;if(e.isDirty=!1,e.flushCallbacks=[],e.target){var t=f(e.target,e.id);if(t)return e.DOM=t,e.flush(),e}if(e.DOM=m(e),d(e.DOM,e.id),e.DOM.getAttribute(o)!==i+"0")throw new TypeError("render error <Simple.Application> 必须有一个容器");return e.target&&e.target.appendChild(e.DOM),e},flush:function(e,t){var n,r,o,i=this;n="string"==typeof e?s(e):m(i,e),d(n,i.id),r=l(i.DOM,n),o=c(i.DOM,r),o.newNode&&(i.DOM=o.newNode,o.newNode=null,o.oldNode=null),i.isDirty=!1,t&&t(r,o);for(var a=i.flushCallbacks,u=0,p=a.length;p>u;u++)a[u]&&a[u](),a[u]=null;i.flushCallbacks=[]},setData:function(e,t,n){var r=this;return"boolean"==typeof t&&t?r.flush(e,n):r.isDirty||(r.isDirty=!0,u.nextTick(function(){r.flush(e,n),e=null,n=null,r=null})),"function"==typeof t&&r.flushCallbacks.push(t),r},setHTML:function(e,t,n){return this.setData(e,t,n)}})}),Simple.Module("simple:core/template/virtual-template/dom",function(e,t,n,r){"use strict";t.exports=function(e){var t,n,o;return n=document.createElement("div"),n.innerHTML=e,r.platform.ie&&r.platform.ie<8&&(n.style.cssText="position:absolute;left:-999999px;top:-999999px;visibility:hidden;",document.body.appendChild(n)),t=1===n.childNodes.length?n.childNodes[0].cloneNode(!0):n,o=t,r.platform.ie&&r.platform.ie<8&&(1!==n.childNodes.length&&(t.style.cssText=""),document.body.removeChild(n)),t=null,n=null,o}}),Simple.Module("simple:core/template/virtual-template/utils",function(e,t,n,r){"use strict";var o={};if(r.platform.browser){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;i?o.nextTick=function(){i.apply(window,arguments)}:o.nextTick=function(e){setTimeout(e,0)}}t.exports=o}),Simple.Module("simple:core/template/virtual-dom/main",function(e,t,n){"use strict";t.exports={diff:e("./diff/main"),patch:e("./patch/main")}}),Simple.Module("simple:core/template/virtual-dom/diff/main",function(e,t,n,r){"use strict";var o=e("../utils/main"),i=e("../patch/main"),a=e("../diff/list").diff,u=function(e,t){var n={};return l(e,t,0,n),n},s=function(e,t){return e.tagName===t.tagName&&o.getItemKey(e)===o.getItemKey(t)},l=function(e,t,n,r){var a=[];if(t){var u=e.nodeType,l=t.nodeType;if(3===u&&3===l){var f=e.nodeValue||e.textContent,d=t.nodeValue||t.textContent;f!==d&&a.push({type:i.TEXT,content:d})}else if(s(e,t)){var m=o.getItemKey(e)||1,h=o.getItemKey(t)||2;if(!n||m!==h){var v=p(e,t);v&&a.push({type:i.PROPS,props:v}),c(o.getChildren(e),o.getChildren(t),n,r,a)}}else a.push({type:i.REPLACE,node:t})}return e=null,t=null,a.length?r[n]=a:void 0},c=function(e,t,n,r,o){var u=a(e,t);if(t=u.children,u.moves.length){var s={type:i.REORDER,moves:u.moves};o.push(s)}for(var c,p=0,d=null,m=n,h=0,v=e.length;v>h;h++){c=e[h];var g=t[h];m+=d&&(p=f(d))?p+1:1,l(c,g,m,r),d=c}},p=function(e,t){var n,r,o=d(e),i=d(t),a=0,u={};for(n in o)r=o[n],i[n]!==r&&(a++,u[n]=i[n]);for(n in i)r=i[n],o.hasOwnProperty(n)||(a++,u[n]=i[n]);return 0===a?null:u},f=function(e){for(var t=0,n=o.getChildren(e),r=0,i=n.length;i>r;r++)t++,t+=f(n[r]);return t},d=function(e){for(var t,n=e.attributes,r={},o=["complete","SimpleEvents"],i=0,a=n.length;a>i;i++)t=n[i].name,n[i].specified&&-1===o.indexOf(t)&&(r[n[i].name]=n[i].value);return e.style.cssText&&(r.style=e.style.cssText),e=null,r};t.exports=u}),Simple.Module("simple:core/template/virtual-dom/utils/main",function(e,t,n,r){"use strict";var o=r.Module.config.comID,i=r.Module.config.listKey;t.exports={getChildren:function(e){for(var t=[],n=e.childNodes,r=0,o=n.length;o>r;r++)switch(n[r].nodeType){case 3:""!==(n[r].nodeValue||n[r].textContent).replace(/\s|\n/gi,"")&&t.push(n[r]);break;case 1:t.push(n[r])}return t},getItemKey:function(e){return e&&1===e.nodeType?e.getAttribute(i)||e.getAttribute(o):void 0},setAttr:function(e,t,n){switch(t){case"style":e.style.cssText=n;break;case"class":e.className=n;break;case"value":var r=e.tagName||"";r=r.toLowerCase(),"input"===r||"textarea"===r?e.value=n:e.setAttribute(t,n);break;default:e.setAttribute(t,n)}}}}),Simple.Module("simple:core/template/virtual-dom/patch/main",function(e,t,n,r){"use strict";var o=r.Module.config.comID,i=e("../utils/main"),a="replace",u="reorder",s="props",l="text",c="remove",p="insert",f=function(e,t){var n={index:0,newNode:null,oldNode:e,remove:[],create:[]};return d(e,n,t),n},d=function(e,t,n){for(var r,o=n[t.index],a=i.getChildren(e),u=a?a.length:0,s=0;u>s;s++)if(r=a[s],t.index++,r)switch(r.nodeType){case 8:break;default:d(r,t,n)}o&&m(e,o,t)},m=function(e,t,n){for(var r,o=0,i=t.length;i>o;o++)switch(r=t[o],r.type){case a:var c=r.node,p=c.cloneNode(!0);e.parentNode.replaceChild(p,e),v(p,e,n),n.oldNode===e&&(n.newNode=p),p=null;break;case u:y(e,r.moves,n);break;case s:g(e,r.props);break;case l:e.nodeValue?e.nodeValue=r.content:e.textContent=r.content;break;default:throw new Error("Unknown patch type "+r.type)}},h=function(e){for(var t,n,r=[],i=e.children,a=0,u=i.length;u>a;a++)t=i[a],(n=t.getAttribute(o))?r.push(n):r=r.concat(h(t));return r},v=function(e,t,n){var r;e&&1===e.nodeType&&((r=i.getItemKey(e))?n.create.push(r):n.create=n.create.concat(h(e))),t&&1===t.nodeType&&((r=i.getItemKey(t))?n.remove.push(r):n.remove=n.remove.concat(h(t)))},g=function(e,t){var n;for(var r in t)void 0===t[r]?e.removeAttribute(r):(n=t[r],i.setAttr(e,r,n))},y=function(e,t,n){for(var r,o,a,u=i.getChildren(e),s={},l=0,f=u.length;f>l;l++)if(o=u[l],1===o.nodeType){var d=i.getItemKey(o);d&&(s[d]=o)}for(var l=0,f=t.length;f>l;l++){a=t[l];var m=a.index;if(r=i.getChildren(e),a.type===c)u[m]===r[m]&&(v(null,r[m],n),e.removeChild(r[m])),u.splice(m,1);else if(a.type===p){var h,d=i.getItemKey(a.item);s[d]?h=s[d]:(h=a.item.cloneNode(!0),v(h,null,n)),u.splice(m,0,h),e.insertBefore(h,r[m]||null)}}};f.REPLACE=a,f.REORDER=u,f.PROPS=s,f.TEXT=l,f.REMOVE=c,f.INSERT=p,t.exports=f}),Simple.Module("simple:core/template/virtual-dom/diff/list",function(e,t,n){"use strict";var r=e("../utils/main"),o=e("../patch/main"),i=function(e,t){function n(e,t){var n={index:e,item:t,type:o.REMOVE};v.push(n)}function i(e,t){var n={index:e,item:t,type:o.INSERT};v.push(n)}function u(e){M.splice(e,1)}for(var s,l,c,p=a(e),f=a(t),d=f.free,m=p.keyIndex,h=f.keyIndex,v=[],g=[],y=0,x=0;y<e.length;){if(s=e[y],l=r.getItemKey(s))if(h.hasOwnProperty(l)){var b=h[l];g.push(t[b])}else g.push(null);else{var w=d[x++];g.push(w||null)}y++}var M=g.slice(0);for(y=0;y<M.length;)c=M[y],null===c?(n(y),u(y)):y++;for(var S=y=0;y<t.length;){s=t[y],l=r.getItemKey(s);var T=M[S],O=r.getItemKey(T);if(T)if(l===O)S++;else if(m.hasOwnProperty(l)){var j=r.getItemKey(M[S+1]);j===l?(n(y,s),u(S),S++):i(y,s)}else i(y,s);else i(y,s);y++}return{moves:v,children:g}},a=function(e){for(var t={},n=[],o=0,i=e.length;i>o;o++){var a=e[o],u=r.getItemKey(a);u?t[u]=o:n.push(a)}return{keyIndex:t,free:n}};n.makeKeyIndexAndFree=a,n.diff=i}),Simple.Module("simple:core/utils/main",function(e,t,n,r){"use strict";var o=e("./underscore");t.exports=o,o.clone=e("./clone"),o.extend=e("./extend"),o.split=e("./split"),o.decodeURIComponent=decodeURIComponent,o.encodeURIComponent=encodeURIComponent,o.each=o.forEach=e("./each"),o.param=e("./param")}),Simple.Module("simple:core/utils/underscore",function(e,t,n,r){"use strict";function o(e){function t(t,n,r,o,i,a){for(;i>=0&&a>i;i+=e){var u=o?o[i]:i;r=n(r,t[u],u,t)}return r}return function(n,r,o,i){r=S(r,i,4);var a=!C(n)&&M.keys(n),u=(a||n).length,s=e>0?0:u-1;return arguments.length<3&&(o=n[a?a[s]:s],s+=e),t(n,r,o,a,s,u)}}function i(e){return function(t,n,r){n=T(n,r);for(var o=E(t),i=e>0?0:o-1;i>=0&&o>i;i+=e)if(n(t[i],i,t))return i;return-1}}function a(e,t,n){return function(r,o,i){var a=0,u=E(r);if("number"==typeof i)e>0?a=i>=0?i:Math.max(i+u,a):u=i>=0?Math.min(i+1,u):i+u+1;else if(n&&i&&u)return i=n(r,o),r[i]===o?i:-1;if(o!==o)return i=t(m.call(r,a,u),M.isNaN),i>=0?i+a:-1;for(i=e>0?a:u-1;i>=0&&u>i;i+=e)if(r[i]===o)return i;return-1}}function u(e,t){var n=U.length,r=e.constructor,o=M.isFunction(r)&&r.prototype||p,i="constructor";for(M.has(e,i)&&!M.contains(t,i)&&t.push(i);n--;)i=U[n],i in e&&e[i]!==o[i]&&!M.contains(t,i)&&t.push(i)}var s={},l=s._,c=Array.prototype,p=Object.prototype,f=Function.prototype,d=c.push,m=c.slice,h=p.toString,v=p.hasOwnProperty,g=Array.isArray,y=Object.keys,x=f.bind,b=Object.create,w=function(){},M=function(e){return e instanceof M?e:this instanceof M?void(this._wrapped=e):new M(e)};M.VERSION="1.8.3";var S=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return function(){return e.apply(t,arguments)}},T=function(e,t,n){return null==e?M.identity:M.isFunction(e)?S(e,t,n):M.isObject(e)?M.matcher(e):M.property(e)};M.iteratee=function(e,t){return T(e,t,1/0)};var O=function(e,t){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var o=1;r>o;o++)for(var i=arguments[o],a=e(i),u=a.length,s=0;u>s;s++){var l=a[s];t&&void 0!==n[l]||(n[l]=i[l])}return n}},j=function(e){if(!M.isObject(e))return{};if(b)return b(e);w.prototype=e;var t=new w;return w.prototype=null,t},A=function(e){return function(t){return null==t?void 0:t[e]}},k=Math.pow(2,53)-1,E=A("length"),C=function(e){var t=E(e);return"number"==typeof t&&t>=0&&k>=t};M.each=M.forEach=function(e,t,n){t=S(t,n);var r,o;if(C(e))for(r=0,o=e.length;o>r;r++)t(e[r],r,e);else{var i=M.keys(e);for(r=0,o=i.length;o>r;r++)t(e[i[r]],i[r],e)}return e},M.map=M.collect=function(e,t,n){t=T(t,n);for(var r=!C(e)&&M.keys(e),o=(r||e).length,i=Array(o),a=0;o>a;a++){var u=r?r[a]:a;i[a]=t(e[u],u,e)}return i},M.reduce=M.foldl=M.inject=o(1),M.reduceRight=M.foldr=o(-1),M.find=M.detect=function(e,t,n){var r;return r=C(e)?M.findIndex(e,t,n):M.findKey(e,t,n),void 0!==r&&-1!==r?e[r]:void 0},M.filter=M.select=function(e,t,n){var r=[];return t=T(t,n),M.each(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r},M.reject=function(e,t,n){return M.filter(e,M.negate(T(t)),n)},M.every=M.all=function(e,t,n){t=T(t,n);for(var r=!C(e)&&M.keys(e),o=(r||e).length,i=0;o>i;i++){var a=r?r[i]:i;if(!t(e[a],a,e))return!1}return!0},M.some=M.any=function(e,t,n){t=T(t,n);for(var r=!C(e)&&M.keys(e),o=(r||e).length,i=0;o>i;i++){var a=r?r[i]:i;if(t(e[a],a,e))return!0}return!1},M.contains=M.includes=M.include=function(e,t,n,r){return C(e)||(e=M.values(e)),("number"!=typeof n||r)&&(n=0),M.indexOf(e,t,n)>=0},M.invoke=function(e,t){var n=m.call(arguments,2),r=M.isFunction(t);return M.map(e,function(e){var o=r?t:e[t];return null==o?o:o.apply(e,n)})},M.pluck=function(e,t){return M.map(e,M.property(t))},M.where=function(e,t){return M.filter(e,M.matcher(t))},M.findWhere=function(e,t){return M.find(e,M.matcher(t))},M.max=function(e,t,n){var r,o,i=-(1/0),a=-(1/0);if(null==t&&null!=e){e=C(e)?e:M.values(e);for(var u=0,s=e.length;s>u;u++)r=e[u],r>i&&(i=r)}else t=T(t,n),M.each(e,function(e,n,r){o=t(e,n,r),(o>a||o===-(1/0)&&i===-(1/0))&&(i=e,a=o)});return i},M.min=function(e,t,n){var r,o,i=1/0,a=1/0;if(null==t&&null!=e){e=C(e)?e:M.values(e);for(var u=0,s=e.length;s>u;u++)r=e[u],i>r&&(i=r)}else t=T(t,n),M.each(e,function(e,n,r){o=t(e,n,r),(a>o||o===1/0&&i===1/0)&&(i=e,a=o)});return i},M.shuffle=function(e){for(var t,n=C(e)?e:M.values(e),r=n.length,o=Array(r),i=0;r>i;i++)t=M.random(0,i),t!==i&&(o[i]=o[t]),o[t]=n[i];return o},M.sample=function(e,t,n){return null==t||n?(C(e)||(e=M.values(e)),e[M.random(e.length-1)]):M.shuffle(e).slice(0,Math.max(0,t))},M.sortBy=function(e,t,n){return t=T(t,n),M.pluck(M.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var I=function(e){return function(t,n,r){var o={};return n=T(n,r),M.each(t,function(r,i){var a=n(r,i,t);e(o,r,a)}),o}};M.groupBy=I(function(e,t,n){M.has(e,n)?e[n].push(t):e[n]=[t]}),M.indexBy=I(function(e,t,n){e[n]=t}),M.countBy=I(function(e,t,n){M.has(e,n)?e[n]++:e[n]=1}),M.toArray=function(e){return e?M.isArray(e)?m.call(e):C(e)?M.map(e,M.identity):M.values(e):[]},M.size=function(e){return null==e?0:C(e)?e.length:M.keys(e).length},M.partition=function(e,t,n){t=T(t,n);var r=[],o=[];return M.each(e,function(e,n,i){(t(e,n,i)?r:o).push(e)}),[r,o]},M.first=M.head=M.take=function(e,t,n){return null!=e?null==t||n?e[0]:M.initial(e,e.length-t):void 0},M.initial=function(e,t,n){return m.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},M.last=function(e,t,n){return null!=e?null==t||n?e[e.length-1]:M.rest(e,Math.max(0,e.length-t)):void 0},M.rest=M.tail=M.drop=function(e,t,n){return m.call(e,null==t||n?1:t)},M.compact=function(e){return M.filter(e,M.identity)};var D=function(e,t,n,r){for(var o=[],i=0,a=r||0,u=E(e);u>a;a++){var s=e[a];if(C(s)&&(M.isArray(s)||M.isArguments(s))){t||(s=D(s,t,n));var l=0,c=s.length;for(o.length+=c;c>l;)o[i++]=s[l++]}else n||(o[i++]=s)}return o};M.flatten=function(e,t){return D(e,t,!1)},M.without=function(e){return M.difference(e,m.call(arguments,1))},M.uniq=M.unique=function(e,t,n,r){M.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=T(n,r));for(var o=[],i=[],a=0,u=E(e);u>a;a++){var s=e[a],l=n?n(s,a,e):s;t?(a&&i===l||o.push(s),i=l):n?M.contains(i,l)||(i.push(l),o.push(s)):M.contains(o,s)||o.push(s)}return o},M.union=function(){return M.uniq(D(arguments,!0,!0))},M.intersection=function(e){for(var t=[],n=arguments.length,r=0,o=E(e);o>r;r++){var i=e[r];if(!M.contains(t,i)){for(var a=1;n>a&&M.contains(arguments[a],i);a++);a===n&&t.push(i)}}return t},M.difference=function(e){var t=D(arguments,!0,!0,1);return M.filter(e,function(e){return!M.contains(t,e)})},M.zip=function(){return M.unzip(arguments)},M.unzip=function(e){for(var t=e&&M.max(e,E).length||0,n=Array(t),r=0;t>r;r++)n[r]=M.pluck(e,r);return n},M.object=function(e,t){for(var n={},r=0,o=E(e);o>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},M.findIndex=i(1),M.findLastIndex=i(-1),M.sortedIndex=function(e,t,n,r){n=T(n,r,1);for(var o=n(t),i=0,a=E(e);a>i;){var u=Math.floor((i+a)/2);n(e[u])<o?i=u+1:a=u}return i},M.indexOf=a(1,M.findIndex,M.sortedIndex),M.lastIndexOf=a(-1,M.findLastIndex),M.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),o=Array(r),i=0;r>i;i++,
e+=n)o[i]=e;return o};var N=function(e,t,n,r,o){if(!(r instanceof t))return e.apply(n,o);var i=j(e.prototype),a=e.apply(i,o);return M.isObject(a)?a:i};M.bind=function(e,t){if(x&&e.bind===x)return x.apply(e,m.call(arguments,1));if(!M.isFunction(e))throw new TypeError("Bind must be called on a function");var n=m.call(arguments,2),r=function(){return N(e,r,t,this,n.concat(m.call(arguments)))};return r},M.partial=function(e){var t=m.call(arguments,1),n=function(){for(var r=0,o=t.length,i=Array(o),a=0;o>a;a++)i[a]=t[a]===M?arguments[r++]:t[a];for(;r<arguments.length;)i.push(arguments[r++]);return N(e,n,this,this,i)};return n},M.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=M.bind(e[n],e);return e},M.memoize=function(e,t){var n=function(r){var o=n.cache,i=""+(t?t.apply(this,arguments):r);return M.has(o,i)||(o[i]=e.apply(this,arguments)),o[i]};return n.cache={},n},M.delay=function(e,t){var n=m.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},M.defer=M.partial(M.delay,M,1),M.throttle=function(e,t,n){var r,o,i,a=null,u=0;n||(n={});var s=function(){u=n.leading===!1?0:M.now(),a=null,i=e.apply(r,o),a||(r=o=null)};return function(){var l=M.now();u||n.leading!==!1||(u=l);var c=t-(l-u);return r=this,o=arguments,0>=c||c>t?(a&&(clearTimeout(a),a=null),u=l,i=e.apply(r,o),a||(r=o=null)):a||n.trailing===!1||(a=setTimeout(s,c)),i}},M.debounce=function(e,t,n){var r,o,i,a,u,s=function(){var l=M.now()-a;t>l&&l>=0?r=setTimeout(s,t-l):(r=null,n||(u=e.apply(i,o),r||(i=o=null)))};return function(){i=this,o=arguments,a=M.now();var l=n&&!r;return r||(r=setTimeout(s,t)),l&&(u=e.apply(i,o),i=o=null),u}},M.wrap=function(e,t){return M.partial(t,e)},M.negate=function(e){return function(){return!e.apply(this,arguments)}},M.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},M.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},M.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},M.once=M.partial(M.before,2);var q=!{toString:null}.propertyIsEnumerable("toString"),U=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];M.keys=function(e){if(!M.isObject(e))return[];if(y)return y(e);var t=[];for(var n in e)M.has(e,n)&&t.push(n);return q&&u(e,t),t},M.allKeys=function(e){if(!M.isObject(e))return[];var t=[];for(var n in e)t.push(n);return q&&u(e,t),t},M.values=function(e){for(var t=M.keys(e),n=t.length,r=Array(n),o=0;n>o;o++)r[o]=e[t[o]];return r},M.mapObject=function(e,t,n){t=T(t,n);for(var r,o=M.keys(e),i=o.length,a={},u=0;i>u;u++)r=o[u],a[r]=t(e[r],r,e);return a},M.pairs=function(e){for(var t=M.keys(e),n=t.length,r=Array(n),o=0;n>o;o++)r[o]=[t[o],e[t[o]]];return r},M.invert=function(e){for(var t={},n=M.keys(e),r=0,o=n.length;o>r;r++)t[e[n[r]]]=n[r];return t},M.functions=M.methods=function(e){var t=[];for(var n in e)M.isFunction(e[n])&&t.push(n);return t.sort()},M.extend=O(M.allKeys),M.extendOwn=M.assign=O(M.keys),M.findKey=function(e,t,n){t=T(t,n);for(var r,o=M.keys(e),i=0,a=o.length;a>i;i++)if(r=o[i],t(e[r],r,e))return r},M.pick=function(e,t,n){var r,o,i={},a=e;if(null==a)return i;M.isFunction(t)?(o=M.allKeys(a),r=S(t,n)):(o=D(arguments,!1,!1,1),r=function(e,t,n){return t in n},a=Object(a));for(var u=0,s=o.length;s>u;u++){var l=o[u],c=a[l];r(c,l,a)&&(i[l]=c)}return i},M.omit=function(e,t,n){if(M.isFunction(t))t=M.negate(t);else{var r=M.map(D(arguments,!1,!1,1),String);t=function(e,t){return!M.contains(r,t)}}return M.pick(e,t,n)},M.defaults=O(M.allKeys,!0),M.create=function(e,t){var n=j(e);return t&&M.extendOwn(n,t),n},M.clone=function(e){return M.isObject(e)?M.isArray(e)?e.slice():M.extend({},e):e},M.tap=function(e,t){return t(e),e},M.isMatch=function(e,t){var n=M.keys(t),r=n.length;if(null==e)return!r;for(var o=Object(e),i=0;r>i;i++){var a=n[i];if(t[a]!==o[a]||!(a in o))return!1}return!0};var _=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof M&&(e=e._wrapped),t instanceof M&&(t=t._wrapped);var o=h.call(e);if(o!==h.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var i="[object Array]"===o;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,u=t.constructor;if(a!==u&&!(M.isFunction(a)&&a instanceof a&&M.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var s=n.length;s--;)if(n[s]===e)return r[s]===t;if(n.push(e),r.push(t),i){if(s=e.length,s!==t.length)return!1;for(;s--;)if(!_(e[s],t[s],n,r))return!1}else{var l,c=M.keys(e);if(s=c.length,M.keys(t).length!==s)return!1;for(;s--;)if(l=c[s],!M.has(t,l)||!_(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0};M.isEqual=function(e,t){return _(e,t)},M.isEmpty=function(e){return null==e?!0:C(e)&&(M.isArray(e)||M.isString(e)||M.isArguments(e))?0===e.length:0===M.keys(e).length},M.isElement=function(e){return!(!e||1!==e.nodeType)},M.isArray=g||function(e){return"[object Array]"===h.call(e)},M.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},M.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){M["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),M.isArguments(arguments)||(M.isArguments=function(e){return M.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(M.isFunction=function(e){return"function"==typeof e||!1}),M.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},M.isNaN=function(e){return M.isNumber(e)&&e!==+e},M.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===h.call(e)},M.isNull=function(e){return null===e},M.isUndefined=function(e){return void 0===e},M.has=function(e,t){return null!=e&&v.call(e,t)},M.noConflict=function(){return s._=l,this},M.identity=function(e){return e},M.constant=function(e){return function(){return e}},M.noop=function(){},M.property=A,M.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},M.matcher=M.matches=function(e){return e=M.extendOwn({},e),function(t){return M.isMatch(t,e)}},M.times=function(e,t,n){var r=Array(Math.max(0,e));t=S(t,n,1);for(var o=0;e>o;o++)r[o]=t(o);return r},M.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},M.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=M.invert(R),P=function(e){var t=function(t){return e[t]},n="(?:"+M.keys(e).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(o,t):e}};M.escape=P(R),M.unescape=P(L),M.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),M.isFunction(r)?r.call(e):r};var F=0;M.uniqueId=function(e){var t=++F+"";return e?e+t:t},M.chain=function(e){var t=M(e);return t._chain=!0,t};var H=function(e,t){return e._chain?M(t).chain():t};M.mixin=function(e){M.each(M.functions(e),function(t){var n=M[t]=e[t];M.prototype[t]=function(){var e=[this._wrapped];return d.apply(e,arguments),H(this,n.apply(M,e))}})},M.mixin(M),M.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=c[e];M.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],H(this,n)}}),M.each(["concat","join","slice"],function(e){var t=c[e];M.prototype[e]=function(){return H(this,t.apply(this._wrapped,arguments))}}),M.prototype.value=function(){return this._wrapped},M.prototype.valueOf=M.prototype.toJSON=M.prototype.value,M.prototype.toString=function(){return""+this._wrapped},t.exports=M}),Simple.Module("simple:core/utils/clone",function(e,t,n,r){"use strict";var o=e("./underscore");t.exports=function(e){return o.isArray(e)?o.extend([],e):o.isObject(e)?o.extend({},e):e}}),Simple.Module("simple:core/utils/extend",function(e,t,n,r){"use strict";var o={extend:function(){var e,t,n,r,o,i,a=arguments[0]||{},u=1,s=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[u]||{},u++),"object"==typeof a||this.isFunction(a)||(a={});s>u;u++)if(null!=(o=arguments[u]))for(r in o)e=a[r],n=o[r],a!==n&&(l&&n&&(this.isPlainObject(n)||(t=this.isArray(n)))?(t?(t=!1,i=e&&this.isArray(e)?e:[]):i=e&&this.isPlainObject(e)?e:{},a[r]=this.extend(l,i,n)):void 0!==n&&(a[r]=n));return a},isFunction:function(e){return"function"===this.type(e)},isArray:Array.isArray||function(e){return"array"===this.type(e)},isNumeric:function(e){return!this.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){var t;if(!e||"object"!==this.type(e))return!1;try{if(e.constructor&&!this.hasOwn.call(e,"constructor")&&!this.hasOwn.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}return void 0===t||this.hasOwn.call(e,t)},hasOwn:{}.hasOwnProperty,type:function(e){var t=Object.prototype.toString.call(e);return t.substr(8,t.length-9).toLowerCase()}};t.exports=function(){return o.extend.apply(o,arguments)}}),Simple.Module("simple:core/utils/split",function(e,t,n,r){"use strict";t.exports=function(e,t,n,r){var o={};if(e){var i,a,u,s;t=t||"\n",n=n||"	";for(var l=e.split(t),c=0,p=l.length;p>c;c++)i=l[c].split(n),a=i[0],s=decodeURIComponent(i[1]),r&&(a=a.trim()),"undefined"==typeof o[a]?o[a]=s:"string"==typeof o[a]?(u=[o[a],s],o[a]=u):o[a].push(s)}return o}}),Simple.Module("simple:core/utils/param",function(e,t,n,r){var o=e("./underscore");t.exports=function(e,t){function n(e,t,r,i){var a,u=/\[\]$/;if(o.isArray(t))o.each(t,function(t,o){r||u.test(e)?i(e,t):n(e+"["+("object"==typeof t?o:"")+"]",t,r,i)});else if(r||"object"!=typeof t)i(e,t);else for(a in t)n(e+"["+a+"]",t[a],r,i)}var r,i=[],a=function(e,t){e=encodeURIComponent(e),t=o.isFunction(t)?t():null==t?"":t,o.isArray(t)?(t=t[0],o.each(t.concat(),function(n){t="&"+e+"="+encodeURIComponent(n)})):t=encodeURIComponent(t),i[i.length]=e+"="+t};if(o.isArray(e))o.each(e,function(e){a(e.name,e.value)});else for(r in e)n(r,e[r],t,a);return i.join("&").replace(/%20/g,"+")}}),Simple.Module("simple:core/utils/each",function(e,t,n,r){var o=e("./underscore"),i=function(e){return function(t){return null==t?void 0:t[e]}},a=Math.pow(2,53)-1,u=i("length"),s=function(e){var t=u(e);return"number"==typeof t&&t>=0&&a>=t};t.exports=function(e,t,n){var r,i;if(t=t.bind(n),s(e))for(r=0,i=e.length;i>r&&t(e[r],r,e)!==!1;r++);else{var a=o.keys(e);for(r=0,i=a.length;i>r&&t(e[a[r]],a[r],e)!==!1;r++);}return e}}),Simple.Module("simple:application/main",function(e,t,n,r){"use strict";var o=r.Module.config.idPrefix,i=r.Utils;t.exports=r.Component.extend({$constructor:function(){var e=this;e.$super(),e.style=[],e.children={},e.componentCount=0,e.id=o+e.componentCount++},_set:function(e){var t=this;return e.style&&(t.style=t.style.concat(e.style)),e.children&&(t.children[e.childrenName]=e.children),t},setProps:function(e,t,n){var r=this;return r.template?(n?r.props=e:i.extend(r.props,e),r.template.setProps(e,t)):r.props=e,r},replaceProps:function(e,t){return this.setProps(e,t,!0)},willMount:function(e){e.resolve()},server:e("./server"),render:e("./render")}),t.exports.setName(t.id)}),Simple.Module("simple:application/render",function(e,t,n,r){"use strict";var o=e("./utils");t.exports=function(e){var t=this;return t.template?t:(o.createComponent(t),o.willMount(t,function(){var n=r.Template.create({id:t.id,app:t,view:t.view,controller:t,data:{props:t.props},target:t.target||r.config.container});t.template=n.render(),r.platform.node&&e&&t.server(e),r.platform.browser&&t.didMount()}),t)}}),Simple.Module("simple:application/utils",function(e,t,n,r){"use strict";var o=r.Deferred,i=r.Module.config.idPrefix,a=function(e){var t,n=e.component,o={};for(var a in n)t=o[a],t instanceof r.Object||(o[a]=n[a].create({app:e,id:i+e.componentCount++}));e.instantiateComponent=o},u=function(e,t){if(e.willMount){var n=o();e.willMount(n),n.then(t,t)["catch"](function(e){console&&console.error(e)})}else t()};t.exports={createComponent:a,willMount:u}}),Simple.Module("simple:application/server",null),Simple.Module("simple:component/main",function(e,t,n,r){"use strict";var o=e("./utils"),i=e("./data"),a=e("./render"),u=e("./set"),s=o.STATUS;t.exports=r.Object.extend({$constructor:function(){var e=this;e.$super(),e.status=s.INITIALIZE,e.component||(e.component={}),e.children={},e.content="",e._isMounted=!1,t.exports.component[e.id]=e},_set:u,render:a,forceUpdate:i.forceUpdate,setState:i.setState,replaceState:i.replaceState,setHTML:i.setHTML,action:function(e,t){return this.app.emit(e,t),this},getDOMNode:function(){return o.parseDOMref(this.template.virtualDOM.DOM,{})},isMounted:function(){return this._isMounted},willMount:function(){},didMount:function(e){},willReceiveProps:function(e){},shouldUpdate:function(e,t){},willUpdate:function(e,t){},didUpdate:function(e,t){},willUnmount:function(){},unmount:function(){var e=this,t=e.children;for(var n in t)t[n].unmount();e.parent&&delete e.parent.children[e.name],e.chidlren={},e.template=null,e.event=null,e.status=s.INITIALIZE,e._isMounted=!1,e.willUnmount()}}),t.exports.reopenClass({component:{},STATUS:s}),t.exports.setName(t.id)}),Simple.Module("simple:component/utils",function(e,t,n,r){"use strict";var o=r.Module.config.comID,i=r.Module.config.idPrefix,a={INITIALIZE:"initialize",RENDER:"render"},u=function(e){var t,n=e.component,o={};for(var a in n)t=o[a],t instanceof r.Object||(o[a]=n[a].create({app:e.app,id:i+e.app.componentCount++}));e.instantiateComponent=o},s=function(e,t){var n,r,i,a=e.getAttribute("ref");a&&(t[a]=e),n=e.children;for(var u=0,l=n.length;l>u;u++)r=n[u],i=r.getAttribute("ref"),i&&(t[i]?t[i]instanceof Array?t[i].push(r):t[i]=[t[i],r]:t[i]=r),r.getAttribute(o)||s(r,t);return t};t.exports={createComponent:u,parseDOMref:s,STATUS:a}}),Simple.Module("simple:component/data",function(e,t,n,r){"use strict";var o=r.Utils;t.exports={forceUpdate:function(e){var t=this;return t.template&&t.template.forceUpdate({state:t.state,props:t.props},e,function(){setTimeout(function(){t.didUpdate(t.state,t.props),t=null,e=null},0)}),t},setProps:function(e,t){var n=t.props,r=e;return t.template?(t.willReceiveProps(r),t.shouldUpdate(t.state,r)!==!1?(t.willUpdate(t.state,r),t.props=r,t.template.setProps(r,!1,function(){setTimeout(function(){t.didUpdate(t.state,n),t=null,e=null,n=null,r=null},0)})):t.props=r):t.props=r,t},setState:function(e,t,n){var r,i=this,a=i.state;return r=n?e:o.extend({},i.state,e),i.template?i.shouldUpdate(r,i.props)!==!1&&(i.willUpdate(r,i.props),i.state=r,i.template.setState(r,t,function(){setTimeout(function(){i.didUpdate(a,i.props),i=null,e=null,t=null,a=null,r=null},0)})):i.state=r,i},replaceState:function(e,t){return this.setState(e,t,!0)},setHTML:function(e,t){var n=this;return n.template&&n.shouldUpdate(e,n.state,n.props)!==!1&&(n.willUpdate(e,n.state,n.props),n.template.setHTML(e,t,function(){setTimeout(function(){n.didUpdate(e,n.state,n.props),n=null,e=null,t=null},0)})),n},getProps:function(){return this.props||null},getState:function(){return this.state||null}}}),Simple.Module("simple:component/render",function(e,t,n,r){"use strict";var o=e("./utils"),i=e("./event"),a=o.STATUS;t.exports=function(e){var t=this;return t.node===!1&&r.platform.node?"<simple-component></simple-component>":(t.status===a.INITIALIZE&&(t.status=a.RENDER,o.createComponent(t),t.app._set({style:t.view.style}),t.willMount(),t.template=r.Template.create({id:t.id,view:t.view,app:t,controller:t,data:{props:t.props,state:t.state,content:t.content},target:e}),t.template=t.template.render(),r.platform.browser&&(t.event=i.create({itself:t.template.virtualDOM.DOM}),t._isMounted=!0,t.didMount(t.getDOMNode()))),t.template)}}),Simple.Module("simple:component/event",function(e,t,n,r){"use strict";function o(e){e[w]=e[w]||{};for(var t in b)e[w][t]=b[t]}function i(e,t,n,r){var i=this.itself,u=a(t),s=v(n);if(o(i),"on"==e?i[w].on(p(u,n),r):"once"==e&&i[w].once(p(u,n),r),m(i,u,n),!l(i,s.name)){i[w][f(s.name)]=!0;var c=this;i.addEventListener?i.addEventListener(s.name,function(e){e.stopPropagation(),c.trigger(s.name,e)},!1):i.attachEvent("on"+s.name,function(e){window.event.cancelBubble=!0,c.trigger(s.name,e)})}}function a(e){return"string"==typeof e?e:e.getAttribute("ref")}function u(e){return e&&1===e.nodeType?null!=e.getAttribute("ref")?e:u(e.parentNode):void 0}function s(e){if(e&&1===e.nodeType){if(null!=e.getAttribute(x))return e;if(null!=e.parentNode)return s(e.parentNode)}}function l(e,t){return null!=e[w][f(t)]}function c(e,t,n){return null==t&&(t=s(e),n=[]),e!=t&&(n.push(e.parentNode),c(e.parentNode,t,n)),n}function p(e,t){return e+"_"+t}function f(e){return"_is_listener_"+e}function d(){return"_stop_propagation"}function m(e,t,n){var r=v(n),o=e[w];o._events=o._events||{},o._events[t]=o._events[t]||{},o._events[t][r.name]=o._events[t][r.name]||{},null!=r.namespace&&(o._events[t][r.name][r.namespace]=r.namespace)}function h(e){var t=s(e),n=a(e),r=t[w],o={},i=r._events[n];for(var u in i){o[u]={};var l=i[u];for(var c in l)o[u][c]=c}return o}function v(e){if(null==e)return null;var t={name:"",namespace:null},n=e.split(".");return 2==n.length?(t.name=n[0],t.namespace=n[1]):t.name=e,t}function g(e,t,n){var r=e[w],o=[];if(null==r._events[t]||null==r._events[t][n])return o;var i=r._events[t][n];for(var a in i)o.push(a);return o}function y(e,t,n,r){if(null!=t){var o=g(e,t,n);if(e[w].trigger(p(t,n),r),o.length>0)for(var i=0;i<o.length;i++)e[w].trigger(p(t,n+"."+o[i]),r)}}var x=r.Module.config.comID,b=e("../core/event/main"),w="SimpleEvents";t.exports=r.Object.extend({on:function(e,t,n){i.call(this,"on",e,t,n)},once:function(e,t,n){i.call(this,"once",e,t,n)},trigger:function(e,t){var n=t.srcElement?t.srcElement:t.target;if(t.refTarget=u(n),t&&t.stopPropagation){var r=t.stopPropagation;t.stopPropagation=function(){r.call(this),this.target[w]=this.target[w]||{},this.target[w][d()]=!0}}else t.stopPropagation=function(){window.event.cancelBubble=!0,this.srcElement[w]=this.srcElement[w]||{},this.srcElement[w][d()]=!0},t.preventDefault=function(){window.event.returnValue=!1};var o=function(e){var t=e.srcElement?e.srcElement:e.target;return t[w]=t[w]||{},1==t[w][d()]},i=function(e){var t=e.srcElement?e.srcElement:e.target;t[w]=t[w]||{},t[w][d()]=!1},l=s(n),p=a(n);y(l,p,e,t);for(var f=c(n),m=0;m<f.length&&!o(t);m++){var h=a(f[m]);null!=h&&y(l,h,e,t)}i(t)},off:function(e,t){var n=s(e),r=a(e),o=h(e),i=v(t),u=[];for(var l in o){if(null==i){u.push(l);for(var c in o[l])u.push(l+"."+c)}if(null!=i&&i.name==l){null==i.namespace&&u.push(l);for(var c in o[l])null==i.namespace&&u.push(l+"."+c),null!=i.namespace&&i.namespace==c&&u.push(l+"."+c)}}for(var f=0;f<u.length;f++)n[w].off(p(r,u[f]))}})}),Simple.Module("simple:component/set",function(e,t,n,r){"use strict";var o=e("./data");t.exports=function(e){var t=this;return e.app&&(t.app=e.app),e.props&&o.setProps(e.props,t),e.content&&(t.content=e.content.join("")),e.parent&&(t.parent=e.parent,t.parent._set({children:t,childrenName:e.name})),e.children&&(t.children[e.childrenName]=e.children),t}}),Simple.Module("simple:router/main",function(e,t,n,r){"use strict";function o(e){var t=/(\w+):\/\//,n=/\w+:\/\/([^:\/?#]+)/,r=/^([^:\/?#]+)/,o=/[^:\/?#]+:(\d+)/,i=/\w(\/[^?#]*)/,a=/(\/[^?#]*)/,u=/\.(\w+)/,s=/(\?[^#]+)/,l=/(\#.+)/,c=e.match(t);c=c&&c[1];var p=e.match(n);c||(p=e.match(r)),p=p&&p[1];var f=e.match(o);f=null===f?null===p?null:"80":f[1];var d=null;d="/"===e.charAt(0)?e.match(a):e.match(i),d=null===d?"/":d[1];var m=null;d&&(m=d.match(u),m=m&&m[1]);var h=e.match(s);h=h&&h[1];var v=e.match(l);v=v&&v[1];var g={protocol:c,hostName:p,port:f,path:d,fileExt:m,search:h,hash:v};return g}function i(e,t){var n=u(e),r=u(t);if(0==r.nodesLength&&"/"==r.originalPath)return 0==n.nodesLength&&"/"==n.originalPath;for(var o=0;o<r.nodesLength;o++){var i=n.nodes[o],a=r.nodes[o],s=a.charAt(0);if(o==r.nodesLength-1){if("*"==s&&null!=i)return!0;if(n.nodesLength>r.nodesLength)return!1}if(null==i&&"["!=s)return!1;if(i!=a&&":"!=s&&"{"!=s&&"["!=s)return!1}return n.fileExt!=r.fileExt?null!=n.fileExt&&"*"==r.fileExt:!0}function a(e,t,n){var r=u(e),o=u(t);return s(r,o,n)}function u(e){var t=e,n=e.split("."),r=n[0],o=null;if(2==n.length&&(o=n[1]),"/"===t)return{originalPath:t,nodes:[],nodesLength:0,fileExt:null};var i=r.substring(1,r.length).split("/");return{originalPath:t,nodes:i,nodesLength:i.length,fileExt:o}}function s(e,t,n){for(var r={},o=0;o<t.nodesLength;o++){var i=e.nodes[o],a=t.nodes[o],u=a.charAt(0);if(":"==u){var s=a.substring(1,a.length);r[s]=i}if("["==u){var s=a.substring(1,a.length-1);r[s]=i||null}if("{"==u){var s=a.substring(1,a.length-1);r[s]=null,null!=n[s]&&(r[s]=n[s](i,e.originalPath))}if("*"==u){var l=t.originalPath.substring(0,t.originalPath.length-1);return e.originalPath.replace(l,"")}}return r}function l(e){if(null==e)return null;e=e.substring(1,e.length);for(var t=e.split("&"),n={},r=0;r<t.length;r++){var o=t[r],i=o.split("=");if(""!=i[0]){var a=i[0],u=i[1];if(null==n[a]&&(n[a]=[]),null!=u)try{u=decodeURIComponent(u)}catch(s){}n[a].push(u||null)}}for(var l in n)1==n[l].length&&(n[l]=n[l][0]);return n}function c(e){if(null==e)return null;e=e.substring(1,e.length);for(var t=e.split("&"),n={},r=0;r<t.length;r++){var o=t[r],i=o.split("=");if(""!=i[0]){var a=i[0],u=i[1];if(null==n[a]&&(n[a]=[]),null!=u)try{u=decodeURIComponent(u)}catch(s){}n[a].push(u||null)}}for(var l in n)1==n[l].length&&(n[l]=n[l][0]);return n}t.exports={template:r.Object.extend(),route:r.Object.extend()},t.exports.route.reopenClass({routerListening:[],defaultHandle:null,use:function(e,t,n){var r=typeof e;"string"==r?this.routerListening.push({pattern:e,handle:t,customs:n||{}}):"function"==r&&(this.defaultHandle=e)},go:function(e,t){var n=this,u=n.routerListening,s=o(e),p=s.path,f=p,d=s.search,m=s.hash,h=r.config.root;if(null!=h&&""!=h){var v=o(h).path;"/"==v.charAt(v.length-1)&&(v=v.substring(0,v.length-1)),f=p.replace(v,"")}if(r.platform.browser){var g=window.location.href,y=o(g),x=y.path+(y.search||"")+(y.hash||""),b=p+(d||"")+(m||"");x!=b&&("pushState"in history?history.pushState({},"",b):window.location.href=b)}for(var w=!1,M=0;M<u.length;M++)if(i(f,u[M].pattern)){var S={};S.path=a(f,u[M].pattern,u[M].customs),S.search=l(d),S.hash=c(m),u[M].handle(S,t),w=!0;break}w||null==this.defaultHandle||this.defaultHandle(e,t)},parse:function(e,t){var n=o(e);return t&&(n.hash=c(n.hash),n.search=l(n.search)),n}}),t.exports.route.setName(t.id)}),Simple.Module("simple:store/main",function(e,t,n,r){"use strict";var o=e("./paging");t.exports=r.Object.extend({$constructor:function(){var e=this;if(e.paging){var t=e.pagingOptions;e.paging=o.create({request:e.request.bind(e),limit:t.limit,page:t.page,min:t.min})}},cache:!1,type:"online",params:{},data:null,dataType:"JSON",jsonp:!1,format:null,ajaxOptions:null,paging:!1,context:null,pagingOptions:{map:{limit:"limit",page:"page"},limit:20,page:1,min:1},method:"GET",request:e("./request"),abort:function(){var e=this;e.isAbort=!0,e.ajax&&e.ajax.abort()}}),t.exports.reopenClass({_hosts:{},setHosts:function(e,t){"object"==typeof e?this._hosts=e:this._hosts[e]=t},getHosts:function(e){return"undefined"==typeof e?this._hosts:this._hosts[e]}}),t.exports.setName(t.id)}),Simple.Module("simple:store/request",function(e,t,n,r){"use strict";var o=r.Tools.ajax,i=r.Deferred,a=r.Utils,u=function(e,t,n){var r=i();if(!e.url)throw new TypeError("store 没有找到 url");e.ajax=o(e.url,a.extend({},e.ajaxOptions,{method:e.method,cache:e.cache,dataType:e.dataType,context:e.context,jsonp:e.jsonp,params:n})),e.ajax.done(function(t,o,i){var a=l(e,r,n,t,o,i);a!==!1&&r.resolve(t,o,i)}).fail(function(t,o,i,a){var u=l(e,r,n,null,i,a);u!==!1&&r.reject(t,o,i,a)}),r.then(function(n,r){e.data=n,e.response=r,t.resolve(n,r)},function(n,r,o){e.response=o,t.reject(n,r,o)})},s=function(e,t,n){var r=l(e,t,n,e.data,null,e.context);r!==!1&&t.resolve(r,"success")},l=function(e,t,n,r,o,i){var a;return e.format&&(a=e.format(t,n,r,o,i))===!1||(a=r),e.paging&&a.paging&&e.paging._set(a.paging),a};t.exports=function(e){var t=this,n=i(),r=t.paging;if(r){var o={},l=t.pagingOptions;o[l.map.page]=r.page,o[l.map.limit]=r.limit,e=a.extend({},t.params,e,o)}if(t.isAbort)n.reject("abort","操作被取消");else switch(t.type){case"inline":s(t,n,e);break;case"online":u(t,n,e)}return n.promise()}}),Simple.Module("simple:store/paging",function(e,t,n,r){"use strict";t.exports=r.Object.extend({_set:function(e){var t=this;e.total&&(t.total=e.total,t.max=parseInt((t.total+t.limit-1)/t.limit)),e.page&&(t.page=e.page),e.limit&&(t.limit=e.limit)},next:function(e){return this.to(this.page+1,e)},prev:function(e){return this.to(this.page-1,e)},first:function(e){return this.to(this.min,e)},last:function(e){return this.to(this.max,e)},to:function(e,t){var n=this;return"undefined"!=typeof e&&(e=parseInt(e),n.page=e,"undefined"!=typeof n.min&&n.page<n.min&&(n.page=n.min),"undefined"!=typeof n.max&&n.page>n.max&&(n.page=n.max),n.request(t)),n}}),t.exports.setName(t.id)}),Simple.Module("simple:tools/ajax/main",function(e,t,n,r){"use strict";var o=r.Utils,i=e("./methods/request/options");t.exports=e("./methods/request"),t.exports.get=e("./methods/get"),t.exports.post=e("./methods/post"),t.exports.html=e("./methods/html"),t.exports.setting=function(e){o.extend(i,e)},t.exports.token=function(e,t){i.token={key:t||"token",value:e||""}},t.exports.nodeData={},t.exports.setData=function(e,n){t.exports.nodeData[e]=n},t.exports.getData=function(e){var n=t.exports.nodeData[e];return n?(delete t.exports.nodeData[e],n):null}}),Simple.Module("simple:tools/ajax/methods/request",function(e,t,n,r){"use strict";var o=r.Deferred,i=r.Utils,a=r.platform.ie&&6===r.platform.ie,u=e("../http/main"),s=e("./request/options"),l=e("./request/url"),c=e("./request/response"),p=null;t.exports=function(t,n){p||(p=e("../main"));var r=o(),f=i.clone(n);f=i.extend({},s,f),f.url=t,f.method=f.method.toUpperCase(),f.dataType=f.dataType.toUpperCase(),l(f),a&&f.xhrFields&&delete f.xhrFields.withCredentials,f.callback=function(e,t){c(r,f,e,t)};var d=p.getData(f.url);if(d)"string"!=typeof d&&(d=JSON.stringify(d)),f.callback(!0,{responseURL:f.url,status:"200",statusText:"OK",text:d});else{f.token&&(f.url+=(f.url.indexOf("?")>-1?"&":"?")+f.token.key+"="+encodeURIComponent(f.token.value)),f.cache||(f.url+=(f.url.indexOf("?")>-1?"&":"?")+"_="+Math.random());var m=u(f)}var h=r.promise();return h.abort=function(){m.abort()},h}}),Simple.Module("simple:tools/ajax/http/main",function(e,t,n,r){var o=e("./client/main"),i=e("./request/script-jsonp-request"),a=e("./request/x-domain-request"),u=e("./request/xml-http-request"),s=r.platform.ie;t.exports=function(e){return r.platform.node?(e.xhr=r.Server.Tools.http,void(e.jsonp=!1)):(r.platform.browser&&e.jsonp?e.xhr=i:e.crossDomain&&(s?8>s?e.xhr=i:8===s?e.xhr=a:e.xhr=u:e.xhr=u),o(e))}}),Simple.Module("simple:tools/ajax/http/client/main",function(e,t,n,r){"use strict";var o=r.Utils,i=(e("./cache"),e("./options")),a={},u={};t.exports=function(e){var t,n,r=!1,s="",l="";t=e.xhr(e),t.open(e.method,e.url,e.async,e.username||null,e.password||null),i(e,t,a,u),t.upload&&t.upload.addEventListener?e.progress&&t.upload.addEventListener("progress",function(n){if(n.lengthComputable){var r=n.loaded/n.total*100;e.progress.call(t,parseInt(r))}},!1):r=!0;var c=function(){var i,p,f,d,m;if(r&&e.progress&&e.progress.call(t,parseInt(t.readyState/4*100)),c&&4===t.readyState){n&&clearTimeout(n),d={},c=void 0,t.onreadystatechange=o.noop,p=l||t.status||404,1223===p&&(p=204),d.text=t.responseText;try{f=s||t.statusText}catch(h){f=s}d.statusCode=p,d.statusText=f,d.http=t,d.getResponseHeader=function(e){var t=this.responsesHeaders[e.toLowerCase()];return null==t?null:t},d.responsesHeaders=function(){for(var e,n=/^(.*?):[ \t]*([^\r\n]*)$/gm,r={},o=t.getAllResponseHeaders();e=n.exec(o);)r[e[1].toLowerCase()]=e[2];return r}(),m=p>=200&&300>p||304===p,m&&e.ifModified&&(i=d.getResponseHeader("Last-Modified"),i&&(a[e.url]=i),i=d.getResponseHeader("etag"),i&&(u[e.url]=i)),e.callback(m,d),s="",l=""}};return e.async&&e.timeout>0&&(n=setTimeout(function(){s="timeout",l="404",t.abort&&t.abort()},e.timeout)),t.onreadystatechange=c,e.beforeSend&&e.beforeSend(e,t),t.send(e.params||null),t}}),Simple.Module("simple:tools/ajax/http/client/options",function(e,t,n,r){"use strict";var o=!(r.platform.ie&&r.platform.ie<10);t.exports=function(e,t,n,r){var i=e.headers;if(o&&e.xhrFields)for(var a in e.xhrFields)t[a]=e.xhrFields[a];for(var a in i)i[a]&&t.setRequestHeader(a,i[a]+"");(e.data&&e.contentType!==!1||e.contentType)&&t.setRequestHeader("Content-Type",e.contentType),e.mimeType&&t.overrideMimeType&&t.overrideMimeType(e.mimeType),e.ifModified&&t.setRequestHeader&&(n[e.url]&&t.setRequestHeader("If-Modified-Since",n[e.url]),r[e.url]&&t.setRequestHeader("If-None-Match",r[e.url]))}}),Simple.Module("simple:tools/ajax/http/client/cache",function(e,t,n,r){var o=r.Utils;t.exports=function(e){var t=storage.getData(e.url);return t?{abort:o.noop}:!1}}),Simple.Module("simple:tools/ajax/http/request/script-jsonp-request",function(e,t,n,r){"use strict";var o=function(e){var t=this;t.options=e,t.readyState=0,t.isAbort=!1};o.prototype={getAllResponseHeaders:function(){return""},getResponseHeader:function(){return""},setRequestHeader:function(){},overrideMimeType:function(){},send:function(e){var t=this,n=t.options,r=n.callbackName||"SimpleAjaxJsonp_"+Math.random().toString(16).substring(2),o=e?t.url+(t.url.indexOf("?")>-1?"&":"?")+e:this.url,i=t.script=document.createElement("script");i.src=o+(t.url.indexOf("?")>-1?"&":"?")+"callback="+r,n.charset&&(i.charset=n.charset);var a=function(e,n,r,i){a=null,t.responseURL=o,t.status=r,t.statusText=n,e&&(t.response=i,t.responseText=i)};window[r]=function(e){t.isAbort?(t.isAbort=!1,a(!1,"abort",404)):(t.readyState=4,i.setAttribute("spl-jsonp-status","success"),a(!0,"OK",200,e))},i.onload=i.onreadystatechange=function(e){i.readyState&&!/loaded|complete/.test(i.readyState)||(i.onreadystatechange=i.load=null,"success"!==i.getAttribute("spl-jsonp-status")&&a(!1,"error",404),window[r]=null,i.parentNode&&i.parentNode.removeChild(i),i=null,t.onreadystatechange&&t.onreadystatechange(e))},document.head.appendChild(i)},open:function(e,t){this.url=t},abort:function(){var e=this;e.isAbort=!0,e.script.parentNode&&e.script.parentNode.removeChild(e.script)}},o.prototype.constructor=o,t.exports=function(e){return new o(e)}}),Simple.Module("simple:tools/ajax/http/request/x-domain-request",function(e,t,n,r){"use strict";var o=function(e){var t=this;t.options=e,t.readyState=0,t.isAbort=!1};o.prototype={getAllResponseHeaders:function(){return"context-type: "+this.http.contentType},getResponseHeader:function(){return""},setRequestHeader:function(){},overrideMimeType:function(){},send:function(e){var t=this,n=t.options,r=function(e,r,i){t.responseURL=n.url,t.isAbort?(t.status=404,t.statusText="timeout"):(t.status=e||200,t.statusText=r||"OK"),t.response=i||o.responseText,t.responseText=i||o.responseText,t.isAbort=!1,t.readyState=4,t.onreadystatechange&&t.onreadystatechange()},o=t.http=new XDomainRequest;o.open(t.method,t.url),o.timeout=1,o.onload=r,o.onerror=function(){r("500","error","")},o.send(e||null)},open:function(e,t){this.method=e,this.url=t},abort:function(){var e=this;e.isAbort=!0,e.http&&e.http.abort()}},o.prototype.constructor=o,t.exports=function(e){return new o(e)}}),Simple.Module("simple:tools/ajax/http/request/xml-http-request",function(e,t,n,r){"use strict";t.exports=function(){var e;try{if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(self.ActiveXObject)try{e=new self.ActiveXObject("Microsoft.XMLHTTP")}catch(t){try{e=new self.ActiveXObject("MSXML2.XMLHTTP")}catch(t){e=new XMLHttpRequest}}}catch(t){throw new TypeError("CreateXmlHttpRequest error "+t.message)}return e}}),Simple.Module("simple:tools/ajax/methods/request/options",function(e,t,n,r){
"use strict";t.exports={canonical:!0,rewriter:!1,dataType:"JSON",jsonp:!1,crossDomain:!0,callbackName:"callback",token:!1,charset:"UTF-8",url:"./",context:null,method:"GET",processData:!0,async:!0,timeout:1e4,mimeType:"text/xml",headers:{"X-Data-Type":"json","X-Requested-With":"XMLHttpRequest"},params:{},cache:!1,cacheSetting:{timeout:6e4,type:"memory"},traditional:!0,ifModified:!1,xhrFields:{withCredentials:!0},contentType:"application/x-www-form-urlencoded; charset=UTF-8"}}),Simple.Module("simple:tools/ajax/methods/request/url",function(e,t,n,r){"use strict";var o=r.Utils,i=function(e){if(e.rewriter){var t,n=e.url,r=e.params;for(var o in r)t=new RegExp("\\$\\{"+o+"\\}","ig"),t.test(n)&&(e.url=e.url.replace(t,r[o]),delete r[o])}},a=function(e){if(e.indexOf("://")>-1){var t=r.Store.getHosts()||{};return e.replace(/(^\w+):\/\//gi,function(e,n){return t[n]||e})}return e},u=function(e,t){var n=null;if((n=e.indexOf("?"))>-1){var r=e.substring(n+1),i=o.split(r,"&","=",!0),a=o.object(o.sortBy(o.pairs(i)));return e.replace(/\?.*$/gi,"?"+o.param(a,t))}return e};t.exports=function(e){e.url=e.url.replace(/#.*$/gi,""),i(e),e.url=a(e.url),"string"!=typeof e.params&&e.processData&&(e.params=o.param(e.params,e.traditional)),"GET"===e.method&&e.params&&e.processData&&(e.url+=(e.url.indexOf("?")>-1?"&":"?")+e.params,e.params=null),e.url=u(e.url,e.traditional)}}),Simple.Module("simple:tools/ajax/methods/request/response",function(e,t,n,r){"use strict";var o=function(e,t,n){var r=n.text,o=t.dataType,i=t.dataParse;return i&&i[o]?i[o](t,r):"JSON"===o&&"string"==typeof r?JSON.parse(r.trim()):r},i=function(e,t){var n=e.dataFilter;return n?n(e.dataType,e,t):t},a=function(e,t,n){var r;r=o(e,t,n),r=i(t,r),n.data=r,t.success&&t.success(e,t,n)===!1||(t.canonical&&"JSON"===t.dataType?r.success===!0?e.resolve(r.data,n,t.context):e.reject(r.errorCode||null,r.message||null,n,t.context):e.resolve(r,n,t.context))},u=function(e,t,n){t.error&&t.error(e,t,n)===!1||e.reject(n.statusCode,n.statusText,n,t.context)};t.exports=function(e,t,n,r){n?a(e,t,r):u(e,t,r)}}),Simple.Module("simple:tools/ajax/methods/get",function(e,t,n,r){"use strict";var o=e("./request");t.exports=function(e,t,n,r){return o(e,{method:"GET",params:t||{},dataType:n||"JSON",context:r||null})}}),Simple.Module("simple:tools/ajax/methods/post",function(e,t,n,r){"use strict";var o=e("./request");t.exports=function(e,t,n,r){return o(e,{method:"POST",params:t||{},dataType:n||"JSON",context:r||null})}}),Simple.Module("simple:tools/ajax/methods/html",function(e,t,n,r){"use strict";var o=e("./request");t.exports=function(e,t,n,r){return o(e,{method:n||"GET",params:t,dataType:"HTML",context:r||null})}}),Simple.Module("simple:tools/cookie/main",function(e,t,n,r){"use strict";var o,i=e("./core/main");o=r.platform.node?r.Server.Tools.cookie:i,t.exports={getData:function(e,t){return o.getCookie(e,t)},setData:function(e,t,n,r){o.setCookie(e,t,n,r)},remove:function(e,t){o.removeCookie(e,t)}}}),Simple.Module("simple:tools/cookie/core/main",function(e,t,n,r){"use strict";var o=r.Utils,i=function(e){var t=o.split(document.cookie,";","=",!0);return t[e]||""},a=function(e,t,n,r){var o=[],i=n.expires,a=n.path,u=n.domain,s=n.secure;if(i){var l=new Date(Date.now()+i);o.push("expires="+l.toGMTString())}a&&o.push("path="+a),u&&o.push("domain="+u),s&&o.push("secure"),o=o.join(";"),document.cookie=e+"="+encodeURIComponent(t)+(o?";"+o:"")},u=function(e){document.cookie=e+"=;expires="+new Date(Date.now()-1e4).toGMTString()};t.exports={getCookie:i,setCookie:a,removeCookie:u}}),Simple.Module("simple:tools/storage/main",function(e,t,n,r){"use strict";var o=e("./data/memory");t.exports={getData:function(e){return o.getData(e)},setData:function(e,t,n){return o.setData(e,t,n),this},remove:function(e){return o.remove(e),this}}}),Simple.Module("simple:tools/storage/data/memory",function(e,t,n,r){"use strict";var o=r.Utils,i={},a={};t.exports={getData:function(e){return e?i[e]||null:o.extend({},i)},setData:function(e,t,n){n||(n=6e4),i[e]=t;var r=a[n];r?a[n].keys.push(e):a[n]={timer:setTimeout(function(e){for(var t=a[e].keys,n=0,r=t.length;r>n;n++)delete i[t[n]];delete a[e]}.bind(this,n),n),keys:[e]}},remove:function(e){delete i[e]}}});